# Introduction

## Downtime Roulette

![Gambling With Uptime](../assets/decor/roulette.png)

在赌场图片轮盘赌，任何特定的数字有一个37的机会被击中。想象一下，你可以单打一个给定的数字将*不会*被打击（约97.3％在你的支持），赢取将支付10倍你的赌注。你会打赌吗？我的钱包快到我的钱包，我的拇指会在我的口袋里开火。

现在想象你可以再次打赌，但是只有在这个轮对你有利的时候才能获得100次旋转，否则你会输。你还会玩吗赢得单打可能会很容易，但是在许多试验中，赔率并不符合你的利益。

人们随时随地都进行数据投注。单个服务器有很好的机会可用。当您运行具有数千台服务器或数十亿个请求的群集时，任何一个分解的可能性就成为规则。

根据十亿次机会，一次一百万次的灾难是很常见的。

## 什么是Riak

Riak是用于高可用性，容错和近线性可扩展性的开源，分布式键/值数据库。简而言之，Riak具有非常高的正常运行时间，并与您一起成长。
<!-- image: phone with 1/0's flying from it to a disk array -->

随着现代世界与日益复杂的联系紧密联系，信息管理发生重大转变。 网络和网络设备刺激了世界历史上看不到的数据收集和访问的爆炸式增长。 存储和管理的价值的数量继续以惊人的速度增长，同时，更多的人比以往需要快速可靠地访问这些数据。 这个趋势被称为*大数据*。

<aside id="big-data" class="sidebar"><h3>那么什么是大数据？</h3>

关于什么构成<em>大数据</em>有很多讨论。


我家里有一个6TB的RAID来存储视频和其他备份。 这算了吗？ 另一方面，CERN抓住了大约200磅的资本寻找希格斯玻色子。

<!-- image: raid box -->

这是一个很难的数字，因为大数据是个人数字。 对一个人来说，最大的可能是小的。 这就是为什么许多定义根本不涉及字节计数，而是关于相对电位。 Gartner提供了一个合理的，大写的大数据定义：

<blockquote><em>大数据是高容量，高速度和/或高品质的信息数据，需要新的处理形式，以加强决策，洞察发现和流程优化。</em></blockquote></aside>

<h3>总是在Riak上投注</h3>

Riak的优点是大容量（可以在需要时读取和写入数据），高速度（容易响应增长）以及各种信息数据（您可以将任何类型的数据存储为值）。

基于*Amazon Dynamo*设计，Riak被建立为真正的Big Data问题的解决方案。 Dynamo是一种高度可用的设计，意味着它可以以非常大的规模快速响应请求，即使您的应用程序每天正在存储和提供数TB数据。 Riak在2009年被开放使用之前已经被用于生产中.Github，Comcast，Voxer，Disqus等人目前使用的是较大的系统，其中存储数百TB的数据，并且每个节点每天处理几GB。
Riak是用Erlang编程语言编写的。 Erlang被选中，因为它强烈支持并发，稳固的分布式通信，热代码加载和容错能力。 它运行在虚拟机上，所以运行Riak需要安装Erlang。

那么你应该用Riak吗 潜在用户的一个很好的经验法则是询问自己，每一个停机时间将会以某种方式（金钱，用户等）花费你的钱。 并不是所有系统都需要这么多的正常运行时间，如果没有，Riak可能不适合你。

## 关于这本书

这不是一个“安装和跟进”指南。 这是一个“阅读和理解”指南。 在开始这本书的时候，不要害怕有Riak，甚至有电脑的方便。 您可能会觉得在某个时候安装，如果是这样，可以在[Riak docs](http://docs.basho.com)中找到说明.


在我看来，这本书最重要的部分是[概念篇](#concepts)。 如果你已经有了一些知识，可能会开始缓慢，但是赶快赶上。 在开展理论基础之后，我们将通过学习如何查询和修改某些设置来帮助[开发人员](#developers)使用Riak。 最后，我们将介绍[operators](#operators)应该知道的基本细节，例如如何设置Riak集群，配置一些值，使用可选工具等等。


## 2.0新功能

Riak 2.0代表了Riak作为数据存储的能力和重点的重大转变。 Riak一直主要关注操作简单性，而且还没有改变。 但是，在设计决策时，操作始终优先于开发人员的需求。 这正在改变。 随着2.0的推出，我们添加了一些开发人员想要看到的功能。 也就是说，以下：

* __Strong Consistency__ Riak仍然是最终一致的，但现在你有选择。 Riak现在是管理数据库的最简单的方法，可以平滑地调整AP和CP之间的每个数据桶的频谱。
* __Better Search__。 Riak的制造商通过利用Solr搜索引擎的力量改进了搜索。您现在可以获得分布式Solr的所有可查询性，而无需手动索引的麻烦。
* __Datatypes__。 Riak历史上通过允许存储任何二进制对象来提供存储灵活性。这仍然是这样，但现在您可以选择存储分布式地图，集合，计数器和标志，以便面对冲突自动收敛。
* __Security__。一个长期的要求，一天终于来了。本地组/用户访问控制。
* __Bucket types__。现在，您可以支持无限制的自定义桶属性，而不需要旧的八卦协议的开销。
* __Ring调整大小__。最后！在过去，您被限制为固定的环尺寸，您现在可以选择动态增加/减少群集中的vnode数量。
* __其他改进__我们还进行了许多其他改进，例如简化的配置管理（不再混淆`app.config`和`vm.args`），减少兄弟的爆炸（通过一个称为DVV的新逻辑时钟），改进内部元数据共享（减少八卦喋喋不休），更好的AAE等等。

本书还包括由John Daily编写的新篇章，以帮助指导开发人员使用Riak编写有效的应用程序。我们希望你喜欢新的，改进的，*不是很小的Riak书*。
